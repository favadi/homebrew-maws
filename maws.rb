# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Maws < Formula
  desc "MFA AWS CLI"
  homepage "https://github.com/favadi/maws"
  version "0.0.2"
  license "BSD-2-Clause"

  on_macos do
    if Hardware::CPU.arm?
      url "http://github.com/favadi/maws/releases/v0.0.2/maws_0.0.2_Darwin_arm64.tar.gz"
      sha256 "60a201f46e8451fe3cf00e883a856c3489342eaabd837076601361188797e83e"

      def install
        bin.install "maws"
      end
    end
    if Hardware::CPU.intel?
      url "http://github.com/favadi/maws/releases/v0.0.2/maws_0.0.2_Darwin_x86_64.tar.gz"
      sha256 "4b4d68ec28abbd41be3811ed55c1cbd59555355642b31338d5ce2c7b5d4981b6"

      def install
        bin.install "maws"
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "http://github.com/favadi/maws/releases/v0.0.2/maws_0.0.2_Linux_arm64.tar.gz"
      sha256 "63aaae481d191436c88f03bf5c6d4f6247b29172fca8d3fa6573568582a62486"

      def install
        bin.install "maws"
      end
    end
    if Hardware::CPU.intel?
      url "http://github.com/favadi/maws/releases/v0.0.2/maws_0.0.2_Linux_x86_64.tar.gz"
      sha256 "1211bdbb429f99983b84ad7d025c140ed2a68d462998c0441ae4cf8f82cc49a4"

      def install
        bin.install "maws"
      end
    end
  end

  depends_on "awscli"

  def post_install
    (bash_completion/"maws_bash_completer").write <<~EOS
      complete -C aws_completer maws
    EOS
    (zsh_completion/"_maws").write <<~EOS
      #compdef maws
      _maws () {
        local e
        e=$(dirname ${funcsourcetrace[1]%:*})/aws_zsh_completer.sh
        if [[ -f $e ]]; then source $e; fi
      }
    EOS
  end
end
